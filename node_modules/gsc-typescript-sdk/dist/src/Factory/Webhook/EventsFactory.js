"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EventsFactory = void 0;
var Events_1 = require("../../Model/Webhook/Events");
var Event_1 = require("../../Model/Webhook/Event");
var EventFactory_1 = require("./EventFactory");
var EventsFactory = /** @class */ (function () {
    function EventsFactory() {
    }
    EventsFactory.makeFromWebhook = function (element) {
        var events = new Events_1.Events();
        if (element["Event"]) {
            if (!(Array.isArray(element["Event"]))) {
                var event_1 = new Event_1.Event(element["Event"], null);
                events.add(event_1);
                return events;
            }
            element["Event"].forEach(function (eventAlias) {
                if (eventAlias) {
                    var event_2 = new Event_1.Event(eventAlias, null);
                    events.add(event_2);
                }
            });
        }
        return events;
    };
    EventsFactory.make = function (element) {
        var events = new Events_1.Events();
        if (!element["Entities"] || !element["Entities"]["Entity"])
            throw "The Json structure is not valid. The property Entities / Entity should exist.";
        if (!(Array.isArray(element["Entities"]["Entity"]))) {
            var event_3 = new Event_1.Event(element["Entities"]["Entity"], null);
            events.add(event_3);
            return events;
        }
        element["Entities"]["Entity"].forEach(function (entity) {
            var entityArray = entity["Events"]["Event"];
            if (!(Array.isArray(entity["Events"]["Event"]))) {
                entityArray = [entity["Events"]["Event"]];
            }
            entityArray.forEach(function (item) {
                var event = EventFactory_1.EventFactory.make(item);
                events.add(event);
            });
        });
        return events;
    };
    return EventsFactory;
}());
exports.EventsFactory = EventsFactory;
//# sourceMappingURL=EventsFactory.js.map